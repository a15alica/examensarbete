<head>
  <meta charset="utf-8">
  <title>Plotly Stapel 4</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
  <div id="myDiv"></div>
  <script>
    var xhttp = new XMLHttpRequest();
    xhttp.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        myFunction(this);
      }
    };
    xhttp.open("GET", "stockholm1.xml", true);
    xhttp.send();

    function myFunction(xml) {
      var xmlDoc, x, z;
      
      var kat1 = 0;
      var kat2 = 0;
      var kat3 = 0;
      var kat4 = 0;
      var kat5 = 0;
      var kat6 = 0;
      var kat7 = 0;
      var kat8 = 0;
      var kat9 = 0;
      var kat10 = 0;
      var kat11 = 0;
      var kat12 = 0;

      var kat1_ = 0;
      var kat2_ = 0;
      var kat3_ = 0;
      var kat4_ = 0;
      var kat5_ = 0;
      var kat6_ = 0;
      var kat7_ = 0;
      var kat8_ = 0;
      var kat9_ = 0;
      var kat10_ = 0;
      var kat11_ = 0;
      var kat12_ = 0;

      xmlDoc = xml.responseXML;
      x = xmlDoc.getElementsByTagName("year");
      z = xmlDoc.getElementsByTagName("temp3");
      for (i = 0; i < x.length; i++) {
        for (d = 1800; d < 1900; d++){
          if (x[i].childNodes[0].nodeValue == d){
            if (z[i].childNodes[0].nodeValue <= -25){
              kat1++;
            }
            else if (z[i].childNodes[0].nodeValue > -25 && z[i].childNodes[0].nodeValue <= -20){
              kat2++;
            }
            else if (z[i].childNodes[0].nodeValue > -20 && z[i].childNodes[0].nodeValue <= -15){
              kat3++;
            }
            else if (z[i].childNodes[0].nodeValue > -15 && z[i].childNodes[0].nodeValue <= -10){
              kat4++;
            }
            else if (z[i].childNodes[0].nodeValue > -10 && z[i].childNodes[0].nodeValue <= -5){
              kat5++;
            }
            else if (z[i].childNodes[0].nodeValue > -5 && z[i].childNodes[0].nodeValue <= 0){
              kat6++;
            }
            else if (z[i].childNodes[0].nodeValue > 0 && z[i].childNodes[0].nodeValue <= 5){
              kat7++;
            }
            else if (z[i].childNodes[0].nodeValue > 5 && z[i].childNodes[0].nodeValue <= 10){
              kat8++;
            }
            else if (z[i].childNodes[0].nodeValue > 10 && z[i].childNodes[0].nodeValue <= 15){
              kat9++;
            }
            else if (z[i].childNodes[0].nodeValue > 15 && z[i].childNodes[0].nodeValue <= 20){
              kat10++;
            }
            else if (z[i].childNodes[0].nodeValue > 20 && z[i].childNodes[0].nodeValue <= 25){
              kat11++;
            }
            else if (z[i].childNodes[0].nodeValue > 25){
              kat12++;
            }
          }
        }
        for (e = 1900; e < 2000; e++){
          if (x[i].childNodes[0].nodeValue == e){
            if (z[i].childNodes[0].nodeValue <= -25){
              kat1_++;
            }
            else if (z[i].childNodes[0].nodeValue > -25 && z[i].childNodes[0].nodeValue <= -20){
              kat2_++;
            }
            else if (z[i].childNodes[0].nodeValue > -20 && z[i].childNodes[0].nodeValue <= -15){
              kat3_++;
            }
            else if (z[i].childNodes[0].nodeValue > -15 && z[i].childNodes[0].nodeValue <= -10){
              kat4_++;
            }
            else if (z[i].childNodes[0].nodeValue > -10 && z[i].childNodes[0].nodeValue <= -5){
              kat5_++;
            }
            else if (z[i].childNodes[0].nodeValue > -5 && z[i].childNodes[0].nodeValue <= 0){
              kat6_++;
            }
            else if (z[i].childNodes[0].nodeValue > 0 && z[i].childNodes[0].nodeValue <= 5){
              kat7_++;
            }
            else if (z[i].childNodes[0].nodeValue > 5 && z[i].childNodes[0].nodeValue <= 10){
              kat8_++;
            }
            else if (z[i].childNodes[0].nodeValue > 10 && z[i].childNodes[0].nodeValue <= 15){
              kat9_++;
            }
            else if (z[i].childNodes[0].nodeValue > 15 && z[i].childNodes[0].nodeValue <= 20){
              kat10_++;
            }
            else if (z[i].childNodes[0].nodeValue > 20 && z[i].childNodes[0].nodeValue <= 25){
              kat11_++;
            }
            else if (z[i].childNodes[0].nodeValue > 25){
              kat12_++;
            }
          }
        }
      }

      var kategori = [];
      kategori.push(kat1, kat2, kat3, kat4, kat5, kat6, kat7, kat8, kat9, kat10, kat11, kat12);
      var kategori2 = [];
      kategori2.push(kat1_, kat2_, kat3_, kat4_, kat5_, kat6_, kat7_, kat8_, kat9_, kat10_, kat11_, kat12_);

      var trace1 = {
        x: ['Kallare 채n -25', '-25 <-> -20', '-20 <-> -15', '-15 <-> -10', '-10 <-> -5', '-5 <-> 0', '0 <-> 5', '5 <-> 10', '10 <-> 15', '15 <-> 20', '20 <-> 25', 'Varmare 채n 25'],
        y: kategori,
        name: 'Sthlm temp 1800-1900',
        type: 'bar'
      };

      var trace2 = {
        x: ['Kallare 채n -25', '-25 <-> -20', '-20 <-> -15', '-15 <-> -10', '-10 <-> -5', '-5 <-> 0', '0 <-> 5', '5 <-> 10', '10 <-> 15', '15 <-> 20', '20 <-> 25', 'Varmare 채n 25'],
        y: kategori2,
        name: 'Sthlm temp 1900-2000',
        type: 'bar'
      };

      var data = [ trace1, trace2 ];

      var layout = {
        title:'Temperaturer Stockholm - 1800-1900/1900-2000'
      };

      Plotly.newPlot('myDiv', data, layout);
    }
  </script>
</body>
